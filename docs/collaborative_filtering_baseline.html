
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><title>Python: module collaborative_filtering_baseline</title>
<meta charset="utf-8">
</head><body bgcolor="#f0f0f8">

<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="heading">
<tr bgcolor="#7799ee">
<td valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial">&nbsp;<br><big><big><strong>collaborative_filtering_baseline</strong></big></big></font></td
><td align=right valign=bottom
><font color="#ffffff" face="helvetica, arial"><a href=".">index</a><br><a href="file:/home/shubham/Desktop/recsys_final/collaborative_filtering_baseline.py">/home/shubham/Desktop/recsys_final/collaborative_filtering_baseline.py</a></font></td></tr></table>
    <p><tt>Created&nbsp;on&nbsp;Mon&nbsp;Oct&nbsp;23&nbsp;07:41:44&nbsp;2017<br>
&nbsp;<br>
@author:&nbsp;Saurabh</tt></p>
<p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#aa55cc">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Modules</strong></big></font></td></tr>
    
<tr><td bgcolor="#aa55cc"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><table width="100%" summary="list"><tr><td width="25%" valign=top><a href="evaluation.html">evaluation</a><br>
</td><td width="25%" valign=top><a href="numpy.html">numpy</a><br>
</td><td width="25%" valign=top><a href="recsys_utils.html">recsys_utils</a><br>
</td><td width="25%" valign=top></td></tr></table></td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#eeaa77">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Functions</strong></big></font></td></tr>
    
<tr><td bgcolor="#eeaa77"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><dl><dt><a name="-predict_baseline"><strong>predict_baseline</strong></a>(mat, dist_mat, test, user_map, movie_map, n, mode, temp2, usr_mean, movie_mean)</dt><dd><tt>Function&nbsp;to&nbsp;predict&nbsp;the&nbsp;ratings&nbsp;by&nbsp;users&nbsp;on&nbsp;movies&nbsp;in&nbsp;the&nbsp;test&nbsp;dataframe.<br>
This&nbsp;function&nbsp;implements&nbsp;both&nbsp;user-user&nbsp;and&nbsp;item-ite&nbsp;collaborative&nbsp;filtering.<br>
&nbsp;<br>
Inputs:<br>
mat&nbsp;(2D&nbsp;numpy&nbsp;array):&nbsp;input&nbsp;train&nbsp;matrix<br>
dist_mat&nbsp;(2D&nbsp;numpy&nbsp;array):&nbsp;matrix&nbsp;where&nbsp;the&nbsp;[i,&nbsp;j]th&nbsp;element&nbsp;is&nbsp;the&nbsp;cosine&nbsp;similarity&nbsp;between&nbsp;the&nbsp;ith&nbsp;and&nbsp;jth&nbsp;item/user.<br>
test(pandas&nbsp;dataframe):&nbsp;pandas&nbsp;test&nbsp;dataframe<br>
user_map&nbsp;(python&nbsp;dict):&nbsp;user&nbsp;mappings<br>
movie_map&nbsp;(python&nbsp;dict):&nbsp;movie&nbsp;mappings<br>
n&nbsp;(int):&nbsp;Number&nbsp;of&nbsp;most&nbsp;similar&nbsp;users/items&nbsp;to&nbsp;consider&nbsp;for&nbsp;prediction<br>
temp2&nbsp;(2D&nbsp;numpy&nbsp;array):&nbsp;Input&nbsp;Matrix&nbsp;modified&nbsp;with&nbsp;BaseLine&nbsp;approach&nbsp;<br>
mode&nbsp;['user',&nbsp;'item']<br>
usr_mean(1D&nbsp;numpy&nbsp;array)&nbsp;:&nbsp;Array&nbsp;of&nbsp;Users&nbsp;Mean&nbsp;<br>
movie_mean(1D&nbsp;numpy&nbsp;array)&nbsp;&nbsp;:Array&nbsp;of&nbsp;Movie&nbsp;Mean.<br>
&nbsp;<br>
Returns:<br>
pred&nbsp;(1D&nbsp;numpy&nbsp;array):&nbsp;array&nbsp;containing&nbsp;predictions&nbsp;to&nbsp;the&nbsp;test&nbsp;data.</tt></dd></dl>
 <dl><dt><a name="-subtract_mean"><strong>subtract_mean</strong></a>(mat_, type<font color="#909090">='user'</font>)</dt><dd><tt>Subtract&nbsp;row&nbsp;means&nbsp;from&nbsp;matrix&nbsp;mat_.<br>
Inputs:<br>
mat_&nbsp;(2D&nbsp;numpy&nbsp;array):&nbsp;matrix&nbsp;from&nbsp;which&nbsp;the&nbsp;mean&nbsp;needs&nbsp;to&nbsp;be&nbsp;subtracted.<br>
&nbsp;<br>
Returns:<br>
mat&nbsp;(2D&nbsp;numpy&nbsp;array):&nbsp;Matrix&nbsp;with&nbsp;row&nbsp;means&nbsp;subtracted.</tt></dd></dl>
 <dl><dt><a name="-time"><strong>time</strong></a>(...)</dt><dd><tt><a href="#-time">time</a>()&nbsp;-&gt;&nbsp;floating&nbsp;point&nbsp;number<br>
&nbsp;<br>
Return&nbsp;the&nbsp;current&nbsp;time&nbsp;in&nbsp;seconds&nbsp;since&nbsp;the&nbsp;Epoch.<br>
Fractions&nbsp;of&nbsp;a&nbsp;second&nbsp;may&nbsp;be&nbsp;present&nbsp;if&nbsp;the&nbsp;system&nbsp;clock&nbsp;provides&nbsp;them.</tt></dd></dl>
</td></tr></table><p>
<table width="100%" cellspacing=0 cellpadding=2 border=0 summary="section">
<tr bgcolor="#55aa55">
<td colspan=3 valign=bottom>&nbsp;<br>
<font color="#ffffff" face="helvetica, arial"><big><strong>Data</strong></big></font></td></tr>
    
<tr><td bgcolor="#55aa55"><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></td><td>&nbsp;</td>
<td width="100%"><strong>count_movie</strong> = Counter({462: 2742, 139: 2415, 88: 2410, 558: 22... 1, 3673: 1, 3675: 1, 3676: 1, 3677: 1, 3678: 1})<br>
<strong>counts</strong> = Counter({23: 1832, 134: 1481, 1013: 1403, 890: 1...039: 13, 1307: 12, 5663: 12, 5780: 12, 4493: 11})<br>
<strong>i</strong> = 3705<br>
<strong>item_dist</strong> = array([[ 1.        ,  0.00768171,  0.0585488 , ....  0.        ,
         0.        ,  1.        ]])<br>
<strong>mask</strong> = &lt;6040x3706 sparse matrix of type '&lt;type 'numpy.b... stored elements in Compressed Sparse Row format&gt;<br>
<strong>means_mat</strong> = array([ 4.04761905,  4.48461538,  4.32142857, ...,  3.63157895,
        3.21428571,  4.46153846])<br>
<strong>movie_map</strong> = {1: 640, 2: 274, 3: 1442, 4: 712, 5: 2024, 6: 457, 7: 698, 8: 1837, 9: 2615, 10: 901, ...}<br>
<strong>movie_mat</strong> = array([ 4.30190931,  3.71189591,  3.57865169, ...,  0.        ,
        0.        ,  0.        ])<br>
<strong>nonzero_vals</strong> = [(0, 0), (0, 6), (0, 9), (0, 12), (0, 14), (0, 24), (0, 32), (0, 35), (0, 36), (0, 45), (0, 55), (0, 67), (0, 75), (0, 83), (0, 87), (0, 88), (0, 96), (0, 98), (0, 105), (0, 106), ...]<br>
<strong>predictions</strong> = array([ 4.09946795,  1.18891951,  4.8289067 , ...,  3.16501929,
        3.95820228,  3.50336778])<br>
<strong>predictions_mov</strong> = array([ 4.09946795,  1.18891951,  4.8289067 , ...,  3.16501929,
        3.95820228,  3.50336778])<br>
<strong>predictions_usr</strong> = array([ 4.09946795,  1.29158146,  4.61774557, ...,  3.83936661,
        3.66220482,  3.67430723])<br>
<strong>start_time_item</strong> = 1510547015.607769<br>
<strong>temp</strong> = &lt;6040x3706 sparse matrix of type '&lt;type 'numpy.f... stored elements in Compressed Sparse Row format&gt;<br>
<strong>temp2</strong> = &lt;3706x6040 sparse matrix of type '&lt;type 'numpy.f...ored elements in Compressed Sparse Column format&gt;<br>
<strong>temp_start_time</strong> = 1510546431.969232<br>
<strong>test</strong> =          userId  movieId  rating   timestamp
800...99       4   974709091

[200041 rows x 4 columns]<br>
<strong>train</strong> = &lt;6040x3706 sparse matrix of type '&lt;type 'numpy.f... stored elements in Compressed Sparse Row format&gt;<br>
<strong>truth</strong> = array([4, 1, 4, ..., 1, 5, 4])<br>
<strong>user_dist</strong> = array([[  1.00000000e+00,  -1.84513186e-03,   3....310050e-02,   0.00000000e+00,   1.00000000e+00]])<br>
<strong>user_map</strong> = {1: 476, 2: 2267, 3: 2226, 4: 5258, 5: 33, 6: 831, 7: 5549, 8: 4067, 9: 1542, 10: 48, ...}<br>
<strong>val</strong> = (6039, 2904)</td></tr></table>
</body></html>